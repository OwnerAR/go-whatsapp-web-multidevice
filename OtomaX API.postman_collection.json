{
	"info": {
		"_postman_id": "1f25bbd2-b0e4-4a7c-ae35-5f7536f64125",
		"name": "OtomaX API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "28863035"
	},
	"item": [
		{
			"name": "Test",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"phone\":\"08123456789\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}Test?token={{token}}",
					"host": [
						"{{urlPrefix}}Test"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "InsertInbox",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"pesan\":\"tiket.100000.1234\",\"kode_reseller\":\"yusuf\",\"pengirim\":\"0812996000\",\"tipe_pengirim\":\"W\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}InsertInbox?token={{token}}",
					"host": [
						"{{urlPrefix}}InsertInbox"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetTrx",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"trxid\":4522967}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}GetTrx?token={{token}}",
					"host": [
						"{{urlPrefix}}GetTrx"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetRs",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode\":\"yusuf\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}GetRs?token={{token}}",
					"host": [
						"{{urlPrefix}}GetRs"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetSaldoRs",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode\":\"yusuf\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}GetSaldoRs?token={{token}}",
					"host": [
						"{{urlPrefix}}GetSaldoRs"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "TesPinRs",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode\":\"yusuf\",\"pin_hash\":\"bE8gxYFbUQNqvqa/w9ANpbWjhE+mrUyLpwvBZUSLxbE=\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}TesPinRs?token={{token}}",
					"host": [
						"{{urlPrefix}}TesPinRs"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetFormatRequest",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"nama\":\"tiketdeposit\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}GetFormatRequest?token={{token}}",
					"host": [
						"{{urlPrefix}}GetFormatRequest"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetVersiOtomaX",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}GetVersiOtomaX?token={{token}}",
					"host": [
						"{{urlPrefix}}GetVersiOtomaX"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "UpdateStatusOutbox",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode\":9047353,\"status\":20}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}UpdateStatusOutbox?token={{token}}",
					"host": [
						"{{urlPrefix}}UpdateStatusOutbox"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "TambahSaldo",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode_reseller\":\"yusuf\",\"jumlah\":1000,\"saldo\":275380,\"keterangan\":\"tes tambah\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}TambahSaldo?token={{token}}",
					"host": [
						"{{urlPrefix}}TambahSaldo"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GetOutboxCallback",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "    {}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}GetOutboxCallback?token={{token}}",
					"host": [
						"{{urlPrefix}}GetOutboxCallback"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "SetOutboxCallback",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"url\":\"http://45.77.173.173:9888/api/senderoto/\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}SetOutboxCallback?token={{token}}",
					"host": [
						"{{urlPrefix}}SetOutboxCallback"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "QueryProduk",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode\":\"BYROMNI\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}QueryProduk?token={{token}}",
					"host": [
						"{{urlPrefix}}QueryProduk"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "QueryOperator",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disabledSystemHeaders": {
					"accept": true,
					"user-agent": true,
					"content-type": true,
					"connection": true,
					"accept-encoding": true
				}
			},
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"kode\":\"PPOB\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{urlPrefix}}QueryOperator?token={{token}}",
					"host": [
						"{{urlPrefix}}QueryOperator"
					],
					"query": [
						{
							"key": "token",
							"value": "{{token}}"
						}
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"appId = pm.variables.get(\"appId\");",
					"appKey = pm.variables.get(\"appKey\");",
					"devKey = pm.variables.get(\"devKey\");",
					"metadata = '{\"id\":\"' + appId + '\"}';",
					"metadata = btoa(metadata).toString(CryptoJS.enc.Base64).replace(/=/g, '').replace(/\\//g, '_').replace(/\\+/g, '-');",
					"//console.log(metadata);",
					"signature = CryptoJS.HmacSHA256(appKey, devKey).toString(CryptoJS.enc.Base64);",
					"//console.log(signature);",
					"signature = CryptoJS.HmacSHA256(pm.request.body.raw, signature)",
					"signature = signature.toString(CryptoJS.enc.Base64).replace(/=/g, '').replace(/\\//g, '_').replace(/\\+/g, '-');",
					"//console.log(signature);",
					"pm.variables.set(\"token\", metadata + '.' + signature);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "urlPrefix",
			"value": "http://localhost:5000/"
		},
		{
			"key": "appId",
			"value": "OtomaX.Addon"
		},
		{
			"key": "appKey",
			"value": "demoKey"
		},
		{
			"key": "devKey",
			"value": "YAR.OtomaX.OpenApi.App",
			"type": "string"
		},
		{
			"key": "token",
			"value": ""
		}
	]
}